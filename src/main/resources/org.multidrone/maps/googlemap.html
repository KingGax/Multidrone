
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0px; padding: 0px }
        #map_canvas { height: 100%; background-color: #666970; }
    </style>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(51.42350819850232, -2.6712636072753853);
            var myOptions = {
                zoom: 14,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.HYBRID,
                mapTypeControl: false,
                navigationControl: false,
                streetViewControl: false,
                backgroundColor: "#666970"
            };

            document.geocoder = new google.maps.Geocoder();
            document.map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
            document.markers = [];
            document.targets = [];
            document.selectedPointMarker = undefined;
            document.refMarker = undefined;
            document.defaultPos = latlng
            document.viewMarkers = [];

            document.infoWindow = new google.maps.InfoWindow({
                content: "Click the map to get Lat/Lng!",
                position: latlng,
            });

            document.zoomIn = function zoomIn() {
                var zoomLevel = document.map.getZoom();
                if (zoomLevel <= 20) document.map.setZoom(zoomLevel + 1);
            }

            document.zoomOut = function zoomOut() {
                var zoomLevel = document.map.getZoom();
                if (zoomLevel > 0) document.map.setZoom(zoomLevel - 1);
            }

            document.focusMap = function focusMap(zoom, lat, lng){
                if (zoom < 0){
                    zoom = 0;
                }
                if (zoom > 20){
                    zoom = 20;
                }
                document.goToLatLong(lat,lng);
                document.map.setZoom(zoom);
            }

            const dronecolours = {
                GREEN: 0 ,
                RED: 1,
                BLUE: 2,
                YELLOW: 3,
                BLACK: 4,
                WHITE: 5,
                MAROON: 6,
                PINK: 7,
                PURPLE: 8,
                CYAN: 9
            }

            document.setMapTypeRoad = function setMapTypeRoad() {
                document.map.setMapTypeId(google.maps.MapTypeId.ROADMAP);
            }
            document.setMapTypeSatellite = function setMapTypeSatellite() {
                document.map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
            }
            document.setMapTypeHybrid = function setMapTypeHybrid() {
                document.map.setMapTypeId(google.maps.MapTypeId.HYBRID);
            }
            document.setMapTypeTerrain = function setMapTypeTerrain() {
                document.map.setMapTypeId(google.maps.MapTypeId.TERRAIN);
            }

            document.focusOnMarkers = function focusOnMarkers() {
                var bounds = new google.maps.LatLngBounds();
                for(i=0;i<document.markers.length;i++) {
                    if(typeof document.markers[i] !== 'undefined') {
                        bounds.extend(document.markers[i].getPosition());
                    }
                }
                document.map.fitBounds(bounds);
            }

            document.goToLocation = function goToLocation(searchString) {
                document.geocoder.geocode( {'address': searchString}, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        document.map.setCenter(results[0].geometry.location);
                    } else {
                        alert("Geocode was not successful for the following reason: " + status);
                    }
                });
            }
			
			document.goToLatLong  = function goToLatLong(lat, lng) {
				document.map.setCenter(new google.maps.LatLng(lat, lng));
            }

            document.moveMarker = function moveMarker(lat, lng, id){
                var iconStr = "defaultptr";



                if(typeof document.markers[id] === 'undefined') {
                    switch(id) {
                        case dronecolours.GREEN:
                            iconStr = "greenptr.png"
                            break;
                        case dronecolours.BLUE:
                            iconStr = "blueptr.png"
                            break;
                        case dronecolours.BLACK:
                             iconStr = "blackptr.png"
                            break;
                        case dronecolours.WHITE:
                            iconStr = "whiteptr.png"
                            break;
                        case dronecolours.YELLOW:
                            iconStr = "yellowptr.png"
                            break;
                        case dronecolours.RED:
                            iconStr = "redptr.png"
                            break;
                        case dronecolours.PINK:
                            iconStr = "pinkptr.png"
                            break
                        case dronecolours.CYAN:
                            iconStr = "cyanptr.png"
                            break;
                        case dronecolours.MAROON:
                            iconStr = "maroonptr.png"
                            break;
                        case dronecolours.PURPLE:
                            iconStr = "purpleptr.png"
                            break;
                    }
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(0, 0),
                        map: document.map,
                        draggable: false,
                        title: "",
                        autoPan: true,
                        icon: iconStr
                    });
                    var pinIcon = new google.maps.MarkerImage(
                        iconStr,
                        null, /* size is determined at runtime */
                        null, /* origin is 0,0 */
                        null, /* anchor is bottom center of the scaled image */
                        new google.maps.Size(30, 20)
                    );
                    marker.setIcon(pinIcon);
                    document.markers[id] = marker;
                }
                document.markers[id].setPosition(new google.maps.LatLng(lat,lng));

            }

            document.moveSightMarker = function moveSightMarker(lat, lng, id){
                var iconStr = "viewmarker.png";
                if(typeof document.viewMarkers[id] === 'undefined') {
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(0, 0),
                        map: document.map,
                        draggable: false,
                        title: "",
                        autoPan: true,
                        icon: iconStr
                    });
                    document.viewMarkers[id] = marker;
                }
                document.viewMarkers[id].setPosition(new google.maps.LatLng(lat,lng));
            }

            document.moveLine = function moveLine(lat1, lng1, lat2, lng2, id){
                if(typeof document.lines[id] !== 'undefined') {
                    //document.lines[id].setMap(null);
                }
                /*const flightPlanCoordinates = [
                    { lat: lat1, lng: lng1 },
                    { lat: lat2, lng: lng2 },
                ];*/
                const flightPlanCoordinates = [
                    { lat: lat1, lng: lng1 },
                    { lat: lat2, lng: lng2 },
                ];
                const line = new google.maps.Polyline({
                    path: flightPlanCoordinates,
                    geodesic: true,
                    strokeColor: "#FF0000",
                    strokeOpacity: 1.0,
                    strokeWeight: 2,
                });
                line.setMap(document.map);
                document.lines[id] = line;
                //document.lines[id].setMap(document.map);
            }

            document.moveTarget = function moveTarget(lat, lng, id){
                var iconStr = "mapres/targets/defaulttarget.png";
                if(typeof document.targets[id] === 'undefined') {
                    switch(id) {
                        case dronecolours.GREEN:
                            iconStr = "mapres/targets/greentarget.png"
                            break;
                        case dronecolours.BLUE:
                            iconStr = "mapres/targets/bluetarget.png"
                            break;
                        case dronecolours.BLACK:
                            iconStr = "mapres/targets/blacktarget.png"
                            break;
                        case dronecolours.WHITE:
                            iconStr = "mapres/targets/whitetarget.png"
                            break;
                        case dronecolours.YELLOW:
                            iconStr = "mapres/targets/yellowtarget.png"
                            break;
                        case dronecolours.RED:
                            iconStr = "mapres/targets/redtarget.png"
                            break;
                        case dronecolours.PINK:
                            iconStr = "mapres/targets/pinktarget.png"
                            break
                        case dronecolours.CYAN:
                            iconStr = "mapres/targets/cyantarget.png"
                            break;
                        case dronecolours.MAROON:
                            iconStr = "mapres/targets/maroontarget.png"
                            break;
                        case dronecolours.PURPLE:
                            iconStr = "mapres/targets/purpletarget.png"
                            break;
                    }
                    var target = new google.maps.Marker({
                        position: new google.maps.LatLng(0, 0),
                        map: document.map,
                        draggable: false,
                        title: "",
                        autoPan: true,
                        icon: iconStr
                    });
                    document.targets[id] = target;
                }
                document.targets[id].setPosition(new google.maps.LatLng(lat,lng));

            }
            // Configure the click listener.
            document.map.addListener("click", (mapsMouseEvent) => {
                // Close the current InfoWindow.
                /*document.infoWindow.close();
                // Create a new InfoWindow.
                document.infoWindow = new google.maps.InfoWindow({
                    position: mapsMouseEvent.latLng,
                });
                document.infoWindow.setContent(
                    JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2)
                );


                document.infoWindow.open(document.map);*/

                app.setClickedPos(mapsMouseEvent.latLng);
                if(typeof document.selectedPointMarker === 'undefined') {
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(0, 0),
                        map: document.map,
                        draggable: false,
                        title: "",
                        autoPan: true,
                        icon: "mapres/targets/selectedpoint.png"
                    });
                    document.selectedPointMarker = marker;
                }
                document.selectedPointMarker.setMap(document.map);
                document.selectedPointMarker.setPosition(mapsMouseEvent.latLng);
            });

            document.setRefPoint = function setRefPoint(lat, lng){
                if(typeof document.refMarker === 'undefined') {
                    var target = new google.maps.Marker({
                        position: new google.maps.LatLng(0, 0),
                        map: document.map,
                        draggable: false,
                        title: "",
                        autoPan: true,
                        icon: "mapres/targets/refrencepos.png"
                    });
                    document.refMarker = target;
                }
                document.refMarker.setPosition(new google.maps.LatLng(lat,lng));

            }

            document.hideSelectedPointMarker = function hideSelectedPointMarker() {
                if(typeof document.selectedPointMarker !== 'undefined') {
                    document.selectedPointMarker.setMap(null);
                }
            }


        }
    </script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
<!--<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBqKRX7iht30Z5hDIPeF9N36ABWNbG1s8&callback=initialize">
</script>-->
</body>
</html>

<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Java-Buddy: Google Maps</title>-->
<!--    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>-->
<!--    <style>#mapcanvas { height: 360px; width: 100%}</style>-->



<!--</head>-->
<!--<body>-->
<!--<h1>Java-Buddy: Google Maps</h1>-->
<!--<div id="mapcanvas">-->

<!--    <script type="text/javascript">-->


<!--        document.map = new google.maps.Map(document.getElementById("mapcanvas"));-->
<!--        var latlng = new google.maps.LatLng(35.857908, 10.598997);-->
<!--        var Options = {-->
<!--            zoom: 15,-->
<!--            center: latlng,-->
<!--            mapTypeId: google.maps.MapTypeId.ROADMAP-->
<!--        };-->
<!--        var map = new google.maps.Map(document.getElementById("mapcanvas"), Options);-->
<!--        //var carMarkerImage = new google.maps.MarkerImage('resources/images/car.png');-->
<!--        var marker = new google.maps.Marker({-->
<!--            position: new google.maps.LatLng(35.857908, 10.598997),-->
<!--            map: map,-->
<!--            draggable: false,-->
<!--//icon: carMarkerImage,-->
<!--            title: "",-->
<!--            autoPan: true-->

<!--        });-->
<!--        var infobulle = new google.maps.InfoWindow({-->
<!--            content: "ddddd"-->
<!--        });-->
<!--        google.maps.event.addListener(marker, 'mouseover', function() {-->
<!--            infobulle.open(map, marker);-->
<!--        });-->


<!--        document.goToLocation = function(x, y) {-->
<!--            alert("goToLocation, x: " + x +", y:" + y);-->
<!--            var latLng = new google.maps.LatLng(x, y);-->
<!--            marker.setPosition(latLng);-->
<!--            map.setCenter(latLng);-->
<!--        }-->


<!--    </script>-->


<!--</div>-->
<!--</body>-->
<!--</html>-->
